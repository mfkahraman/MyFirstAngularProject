<body class="portfolio-page">
  <main class="main">

    <!-- Page Title -->
    <div class="page-title accent-background">
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0">Portfolio</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="index.html">Home</a></li>
            <li class="current">Portfolio</li>
          </ol>
        </nav>
      </div>
    </div><!-- End Page Title -->

    <!-- Portfolio Section -->
    <section id="portfolio" class="portfolio section">

      <div class="container">

        <div class="isotope-layout" data-default-filter="*" data-layout="masonry" data-sort="original-order">

          <ul class="portfolio-filters isotope-filters" data-aos="fade-up" data-aos-delay="100">
            <li (click)="filterByCategory(null)" [class.filter-active]="selectedCategoryId === null" style="cursor:pointer;">All</li>
            <li *ngFor="let category of categories"
                (click)="filterByCategory(category.id)"
                [class.filter-active]="selectedCategoryId === category.id"
                style="cursor:pointer;">
              {{ category.categoryName }}
            </li>
          </ul><!-- End Portfolio Filters -->


          <div *ngIf="loadingProducts || loadingCategories" class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
          <div *ngIf="error" class="alert alert-danger text-center">{{ error }}</div>
          <div class="row gy-4 isotope-container" data-aos="fade-up" data-aos-delay="200" *ngIf="!loadingProducts && !loadingCategories && !error">
            <ng-container *ngFor="let product of filteredProducts">
              <div class="col-lg-4 col-md-6 portfolio-item isotope-item" [ngClass]="'filter-' + (product.category?.id || product.categoryId || 'unknown')">
                <div class="modern-portfolio-card" [routerLink]="['/portfoliodetails', product.id]" style="cursor:pointer;" title="View Details">
                  <div class="modern-portfolio-image">
                    <img [src]="getImageUrl(product.thumbnailImagePath || product.imagePath)" class="img-fluid" [alt]="product.productName">
                  </div>
                  <div class="modern-portfolio-info">
                    <h4>{{ product.productName }}</h4>
                    <p>{{ product.shortDescription || product.description }}</p>
                    <div class="portfolio-actions">
                      <a *ngIf="product.imagePath" [href]="getImageUrl(product.imagePath)" [title]="product.productName" data-gallery="portfolio-gallery" class="glightbox preview-link" aria-label="Preview" (click)="$event.stopPropagation()"><i class="bi bi-zoom-in"></i></a>
                      <a [routerLink]="['/portfoliodetails', product.id]" (click)="$event.stopPropagation()" title="More Details" class="details-link" aria-label="More Details"><i class="bi bi-link-45deg"></i></a>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
            <div *ngIf="filteredProducts.length === 0" class="col-12 text-center py-5">
              <p class="text-muted">No portfolio items found in this category.</p>
            </div>
          </div><!-- End Portfolio Container -->

        </div>

      </div>

    </section><!-- /Portfolio Section -->

  </main>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>


  <!-- Vendor JS Files -->
  <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/vendor/php-email-form/validate.js"></script>
  <script src="/assets/vendor/aos/aos.js"></script>
  <script src="/assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="/assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="/assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="/assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Main JS File -->
  <script src="/assets/js/main.js"></script>

</body>
