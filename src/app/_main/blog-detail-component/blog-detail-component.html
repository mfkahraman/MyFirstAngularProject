<!-- Page Title -->
<div class="page-title dark-background" *ngIf="blog">
  <div class="container position-relative">
    <h1>{{blog.title}}</h1>
    <nav class="breadcrumbs">
      <ol>
        <li><a routerLink="/">Home</a></li>
        <li><a routerLink="/blog">Blog</a></li>
        <li class="current">{{blog.title}}</li>
      </ol>
    </nav>
  </div>
</div><!-- End Page Title -->

<!-- Blog Details Section -->
<section id="blog-details" class="blog-details section" *ngIf="blog">
  <div class="container">

    <article class="article">

      <div class="post-img">
        <img [src]="blog.coverImageUrl" [alt]="blog.title" class="img-fluid">
      </div>

      <h2 class="title">{{blog.title}}</h2>

      <div class="meta-top">
        <ul>
          <li class="d-flex align-items-center">
            <i class="bi bi-person"></i>
            <a>{{blog.writer?.fullName}}</a>
          </li>
          <li class="d-flex align-items-center">
            <i class="bi bi-clock"></i>
            <time [attr.datetime]="blog.createdAt">{{blog.createdAt | date:'MMMM dd, yyyy'}}</time>
          </li>
          <li class="d-flex align-items-center">
            <i class="bi bi-folder2"></i>
            <a>{{blog.category?.name || 'Uncategorized'}}</a>
          </li>
        </ul>
      </div><!-- End meta top -->

      <div class="content">
        <p [innerHTML]="blog.content"></p>
      </div><!-- End post content -->

      <div class="meta-bottom" *ngIf="blog.blogTags && blog.blogTags.length > 0">
        <i class="bi bi-tags"></i>
        <ul class="tags">
          <li *ngFor="let blogTag of blog.blogTags"><a>{{blogTag.tag?.name}}</a></li>
        </ul>
      </div><!-- End meta bottom -->

    </article>

  </div>
</section><!-- /Blog Details Section -->

<!-- Comments Section -->
<section class="comments section" *ngIf="blog && blog.comments && blog.comments.length > 0">
  <div class="container">
    <h4 class="comments-count">{{blog.comments.length}} Comment{{blog.comments.length > 1 ? 's' : ''}}</h4>

    <div class="comment" *ngFor="let comment of blog.comments">
      <div class="d-flex">
        <div class="comment-img">
          <i class="bi bi-person-circle"></i>
        </div>
        <div>
          <h5 class="comment-author">{{comment.writer?.fullName}}</h5>
          <time class="comment-date" [attr.datetime]="comment.createdAt">{{comment.createdAt | date:'MMM dd, yyyy'}}</time>
          <p class="comment-content">{{comment.content}}</p>
        </div>
      </div>
    </div><!-- End comment -->

  </div>
</section><!-- /Comments Section -->

<!-- No blog found message -->
<section class="section" *ngIf="!blog && blogId">
  <div class="container">
    <div class="alert alert-warning text-center">
      <i class="bi bi-exclamation-triangle"></i> Blog post not found.
      <br>
      <a routerLink="/blog" class="btn btn-primary mt-3">Back to Blog List</a>
    </div>
  </div>
</section>
